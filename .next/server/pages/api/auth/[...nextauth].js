"use strict";(()=>{var e={};e.id=748,e.ids=[748],e.modules={8770:e=>{e.exports=require("@nhost/nhost-js")},3227:e=>{e.exports=require("next-auth")},7449:e=>{e.exports=require("next-auth/providers/credentials")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7618:e=>{e.exports=import("bcryptjs")},7692:(e,a,r)=>{r.a(e,async(e,l)=>{try{r.r(a),r.d(a,{config:()=>u,default:()=>d,routeModule:()=>c});var t=r(1802),s=r(7153),i=r(6249),o=r(1224),n=e([o]);o=(n.then?(await n)():n)[0];let d=(0,i.l)(o,"default"),u=(0,i.l)(o,"config"),c=new t.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/auth/[...nextauth]",pathname:"/api/auth/[...nextauth]",bundlePath:"",filename:""},userland:o});l()}catch(e){l(e)}})},1224:(e,a,r)=>{r.a(e,async(e,l)=>{try{r.r(a),r.d(a,{default:()=>c});var t=r(3227),s=r.n(t),i=r(7449),o=r.n(i),n=r(7618);r(5985);var d=r(1850),u=e([n,d]);[n,d]=u.then?(await u)():u;let c=s()({providers:[o()({name:"credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){if(console.log("\uD83D\uDD10 NextAuth authorize called with:",{email:e?.email}),!e?.email||!e?.password)return console.log("❌ Missing credentials"),null;try{console.log("Using fallback authentication for:",e.email);let a=await d.H.findUserByEmail(e.email);if(!a)throw console.log("User not found in fallback store"),Error("Invalid credentials");if(!await n.default.compare(e.password,a.passwordHash))throw console.log("Invalid password in fallback store"),Error("Invalid credentials");return console.log("Fallback authentication successful"),{id:a.id,email:a.email,name:a.name,phone:a.phone,walletBalance:a.walletBalance||0,bonusWallet:a.bonusWallet||0,totalReferrals:a.totalReferrals||0,referralCode:a.referralCode,emailVerified:!!a.emailVerified}}catch(e){return console.error("Authentication error:",e),null}}})],session:{strategy:"jwt",maxAge:2592e3},callbacks:{jwt:async({token:e,user:a})=>(a&&(e.id=a.id,e.phone=a.phone,e.walletBalance=a.walletBalance,e.bonusWallet=a.bonusWallet,e.totalReferrals=a.totalReferrals,e.referralCode=a.referralCode,e.emailVerified=!!a.emailVerified),e),session:async({session:e,token:a})=>(a&&(e.user.id=a.id,e.user.phone=a.phone,e.user.walletBalance=a.walletBalance,e.user.bonusWallet=a.bonusWallet,e.user.totalReferrals=a.totalReferrals,e.user.referralCode=a.referralCode,e.user.emailVerified=a.emailVerified),e)},pages:{signIn:"/login",error:"/auth/error"},secret:process.env.NEXTAUTH_SECRET});l()}catch(e){l(e)}})}};var a=require("../../../webpack-api-runtime.js");a.C(e);var r=e=>a(a.s=e),l=a.X(0,[41],()=>r(7692));module.exports=l})();