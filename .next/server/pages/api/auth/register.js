"use strict";(()=>{var e={};e.id=7,e.ids=[7],e.modules={8770:e=>{e.exports=require("@nhost/nhost-js")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7618:e=>{e.exports=import("bcryptjs")},1333:(e,r,s)=>{s.a(e,async(e,t)=>{try{s.r(r),s.d(r,{config:()=>c,default:()=>l,routeModule:()=>d});var a=s(1802),o=s(7153),n=s(6249),i=s(5614),u=e([i]);i=(u.then?(await u)():u)[0];let l=(0,n.l)(i,"default"),c=(0,n.l)(i,"config"),d=new a.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/auth/register",pathname:"/api/auth/register",bundlePath:"",filename:""},userland:i});t()}catch(e){t(e)}})},5614:(e,r,s)=>{s.a(e,async(e,t)=>{try{s.r(r),s.d(r,{default:()=>n});var a=s(1850),o=e([a]);async function n(e,r){if("POST"!==e.method)return r.status(405).json({message:"Method not allowed"});let{name:s,email:t,phone:o,password:n,referral_code:i}=e.body;if(!s||!t||!o||!n)return r.status(400).json({message:"Missing required fields"});try{console.log("\uD83D\uDD04 Starting registration for:",t),console.log("\uD83D\uDD27 Environment check - NEXT_PUBLIC_USE_NHOST:","false");let e=`PV${Math.random().toString(36).substring(2,8).toUpperCase()}`;console.log("\uD83D\uDD04 Creating user with userStore...");let i=await a.H.createUser({name:s,email:t,phone:o,passwordHash:n,referralCode:e});console.log("âœ… User created successfully:",i.email),r.status(201).json({message:"Registration successful! You can now login with your credentials.",userId:i.id,needsVerification:!1,referralCode:e,emailSent:!1})}catch(s){console.error("Registration error:",s);let e=s instanceof Error?s.message:"Internal server error";r.status(500).json({message:e,error:s instanceof Error?s.message:"Unknown error"})}}a=(o.then?(await o)():o)[0],t()}catch(e){t(e)}})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[41],()=>s(1333));module.exports=t})();